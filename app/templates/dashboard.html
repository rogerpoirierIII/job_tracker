{% extends "base.html" %}

{% block content %}
  <h2>Dashboard</h2>
  <a href="{{ url_for('main.new_job') }}">Add New Job</a>
<form method="get" action="{{ url_for('main.dashboard') }}" style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
  <label for="status">Filter by Status:</label>
  <select name="status" id="status">
    <option value="">All</option>
    <option value="Applied" {% if status_filter=='Applied' %}selected{% endif %}>Applied</option>
    <option value="Interview" {% if status_filter=='Interview' %}selected{% endif %}>Interview</option>
    <option value="Offer" {% if status_filter=='Offer' %}selected{% endif %}>Offer</option>
    <option value="Rejected" {% if status_filter=='Rejected' %}selected{% endif %}>Rejected</option>
  </select>

  <button type="submit">Apply Filter</button>
  <a href="{{ url_for('main.dashboard') }}"><button type="button">Clear Filter</button></a>
</form>



<table>
    <tr>
      <th>Title</th>
      <th>Company</th>
      <th>Status</th>
      <th>Notes</th>
      <th>Actions</th>
    </tr>
    {% for job in jobs %}
    <tr>
      <td>{{ job.title }}</td>
      <td>{{ job.company }}</td>
      <td>{{ job.status }}</td>
      <td>{{ job.notes }}</td>
      <td>
        <a href="{{ url_for('main.edit_job', job_id=job.id) }}">Edit</a>
        <form action="{{ url_for('main.delete_job', job_id=job.id) }}" method="POST" style="display:inline;">
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
{% endblock %}